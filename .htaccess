# Bật URL đẹp, ẩn .php
RewriteEngine On

# Force HTTPS (bỏ nếu đã có ở load balancer)
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Phục vụ file tĩnh bình thường
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Giữ tương thích URL cũ (301 sang URL đẹp)
RewriteRule ^forgot_password(?:\.php)?$ /forgot-password [R=301,L]
RewriteRule ^reset_password(?:\.php)?$ /reset-password [R=301,L]

# Điều phối tất cả vào front controller
RewriteRule ^ index.php [QSA,L]
